<!DOCTYPE html>
<html>
<head>
    <title>Melfin Jeno - API Playground</title>
    <style>
        body { font-family: Arial; margin: 40px; max-width: 800px; }
        input, button { padding: 10px; margin: 5px; font-size: 16px; }
        #results { margin-top: 20px; padding: 20px; border: 1px solid #ccc; border-radius: 8px; background: #f9f9f9; }
        h2 { color: #333; }
        ul { padding-left: 20px; }
    </style>
</head>
<body>
    <h1> Melfin Jeno - Developer Portfolio API</h1>
    <p>Click buttons to query my live resume API!</p>
    
    <button onclick="loadProfile()"> View Full Profile</button>
    <button onclick="loadTopSkills()"> Show Top Skills</button>
    
    <input id="skillInput" placeholder="e.g. Python" />
    <button onclick="loadProjects()"> Filter Projects</button>
    
    <input id="searchInput" placeholder="e.g. Jeno" />
    <button onclick="search()"> Search</button>
    
    <div id="results">Click a button to start!</div>

    <script>
        const API_BASE = 'http://127.0.0.1:5000';
        
        async function loadProfile() {
            try {
                const res = await fetch(`${API_BASE}/profile`);
                const data = await res.json();
                document.getElementById('results').innerHTML = `
                    <h2> Profile</h2>
                    <p><strong>Name:</strong> ${data.name}</p>
                    <p><strong>Email:</strong> ${data.email}</p>
                    <p><strong>Education:</strong> ${data.education}</p>
                    <p><strong>Skills:</strong> ${data.skills.join(', ')}</p>
                    <ul>${data.projects.map(p => `<li>${p}</li>`).join('')}</ul>
                `;
            } catch(e) { 
                document.getElementById('results').innerHTML = 'Start backend first: python app.py'; 
            }
        }
        
        async function loadTopSkills() {
            const res = await fetch(`${API_BASE}/skills/top`);
            const data = await res.json();
            document.getElementById('results').innerHTML = `
                <h2> Top Skills</h2>
                <ul>${data.top_skills.map(s => `<li> ${s}</li>`).join('')}</ul>
            `;
        }
        
        async function loadProjects() {
            const skill = document.getElementById('skillInput').value;
            const url = skill ? `${API_BASE}/projects?skill=${skill}` : `${API_BASE}/projects`;
            const res = await fetch(url);
            const projects = await res.json();
            document.getElementById('results').innerHTML = `
                <h2> Projects ${skill ? `for "${skill}"` : '(all)'}</h2>
                ${projects.length ? `<ul>${projects.map(p => `<li><strong>${p}</strong></li>`).join('')}</ul>` : '<p> No projects</p>'}
            `;
        }
        
        async function search() {
            const q = document.getElementById('searchInput').value;
            const res = await fetch(`${API_BASE}/search?q=${q}`);
            const results = await res.json();
            document.getElementById('results').innerHTML = `
                <h2> Search "${q}"</h2>
                ${results.length ? results.map(r => `<p> Found: ${r.name}</p>`).join('') : '<p> No results</p>'}
            `;
        }
    </script>
</body>
</html>
